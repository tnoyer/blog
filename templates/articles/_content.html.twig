<div class="block-articles">
    {% for article in articles %}
        <div class="card" style="width: 100%; margin-bottom: 1rem;">
            <div class="card-body">
                <div class="card-block-image">
                    {% if(article.featuredImage) %}
                        <p><img src="{{ vich_uploader_asset(article, 'imageFile')|imagine_filter('carre') }}"
                                alt="{{ article.titre }}"></p>
                    {% else %}
                        <p><img src="{{ asset('img/default-image.png')|imagine_filter('carre') }}" alt="{{ article.titre }}"/></p>
                    {% endif %}
                </div>
                <div class="card-block-text">
                    <h5 class="card-title">
                        <a href="{{ path('actualites_article', {'slug': article.slug}) }}">{{ article.titre }}</a>
                    </h5>
                    <h6 class="card-subtitle mb-2 text-muted">{{ article.slug }}</h6>
                    <p class="card-text">
                        {# slice ne fonctionne pas avec raw mais avec striptags #}
                        {{ article.contenu | length > 200 ? article.contenu | slice(0, 200) | striptags ~ ' [...]' : article.contenu | raw }}
                    </p>
                    {% for categorie in article.categories %}
                        <span class="badge bg-primary">{{ categorie.nom }}</span>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endfor %}
</div>

{# Variables personnalisÃ©es #}
{% set queryParams = app.request.query.all %}
{% set queryString = queryParams|filter((v, k) => k != "page" and k != "ajax")|url_encode %}

<ul class="pagination">
    <li class="page-item {{ (page == 1) ? 'disabled' : '' }}">
        <a class="page-link" href="?page=1&{{queryString}}" aria-label="Previous">
            <span aria-hidden="true">&laquo;</span>
        </a>
    </li>
    <li class="page-item {{ (page == 1) ? 'disabled' : '' }}">
        <a class="page-link" href="{{ (page > 1) ? '?page=' ~ (page - 1) : '' }}&{{queryString}}" aria-label="Previous">
            <span aria-hidden="true">&lt;</span>
        </a>
    </li>
    {% set pages = (total / limit)|round(0, 'ceil') %}
    {% for item in 1..pages %}
        <li class="page-item {{ (page == item) ? 'active' : '' }}">
            <a class="page-link" href="?page={{ item }}&{{queryString}}">{{ item }}</a>
        </li>
    {% endfor %}
    <li class="page-item {{ (page == pages) ? 'disabled' : '' }}">
        <a class="page-link" href="{{ (page < pages) ? '?page=' ~ (page + 1) : '' }}&{{queryString}}" aria-label="Next">
            <span aria-hidden="true">&gt;</span>
        </a>
    </li>
    <li class="page-item {{ (page == pages) ? 'disabled' : '' }}">
        <a class="page-link" href="?page={{ pages }}&{{queryString}}" aria-label="Next">
            <span aria-hidden="true">&raquo;</span>
        </a>
    </li>
</ul>

